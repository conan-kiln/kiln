--- a/src/m4.c
+++ b/src/m4.c
@@ -36,4 +36,8 @@
 # include <assert.h>
 #endif
 
+#ifdef _WIN32
+#  include <crtdbg.h>
+#endif
+
 /* TRANSLATORS: This is a non-ASCII name: The first name is (with
@@ -430,5 +434,14 @@
   textdomain (PACKAGE);
   atexit (close_stdin);
 
+#ifdef _WIN32
+  _CrtSetReportMode(_CRT_WARN, _CRTDBG_MODE_FILE);
+  _CrtSetReportFile(_CRT_WARN, _CRTDBG_FILE_STDERR);
+  _CrtSetReportMode(_CRT_ERROR, _CRTDBG_MODE_FILE);
+  _CrtSetReportFile(_CRT_ERROR, _CRTDBG_FILE_STDERR);
+  _CrtSetReportMode(_CRT_ASSERT, _CRTDBG_MODE_FILE);
+  _CrtSetReportFile(_CRT_ASSERT, _CRTDBG_FILE_STDERR);
+#endif
+
   include_init ();
   debug_init ();
 
