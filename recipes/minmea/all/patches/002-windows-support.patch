--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -9,6 +9,11 @@
 
 set(minmea_SRCS minmea.c minmea.h)
 add_library(minmea ${minmea_SRCS})
+target_include_directories(minmea PRIVATE ${CMAKE_CURRENT_SOURCE_DIR})
+if (WIN32)
+    configure_file(compat/minmea_compat_windows.h ${CMAKE_CURRENT_SOURCE_DIR}/minmea_compat.h COPYONLY)
+    target_compile_definitions(minmea PRIVATE MINMEA_INCLUDE_COMPAT)
+endif()
 
 add_executable(example example.c)
 target_link_libraries(example minmea)
