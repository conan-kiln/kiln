--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -36,6 +36,7 @@
 set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)
 set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin)
 
+if(NOT SHARED)
 add_library(xbyak_aarch64 STATIC src/xbyak_aarch64_impl.cpp src/util_impl.cpp)
 add_library(xbyak_aarch64::xbyak_aarch64 ALIAS xbyak_aarch64)
 target_include_directories(xbyak_aarch64 PUBLIC
@@ -43,10 +44,7 @@
 	$<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/src>
 	$<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/xbyak_aarch64/>
 	$<INSTALL_INTERFACE:$CMAKE_INSTALL_DIR/include>)
-set_target_properties(xbyak_aarch64 PROPERTIES
-	POSITION_INDEPENDENT_CODE ON)
-
-if(SHARED)
+else()
 add_library(xbyak_aarch64_sh SHARED src/xbyak_aarch64_impl.cpp src/util_impl.cpp)
 add_library(xbyak_aarch64::xbyak_aarch64_sh ALIAS xbyak_aarch64_sh)
 target_include_directories(xbyak_aarch64_sh PUBLIC
@@ -55,8 +53,6 @@
 	$<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/xbyak_aarch64/>
 	$<INSTALL_INTERFACE:$CMAKE_INSTALL_DIR/include>)
 set_target_properties(xbyak_aarch64_sh PROPERTIES
-	POSITION_INDEPENDENT_CODE ON)
-set_target_properties(xbyak_aarch64_sh PROPERTIES
 	OUTPUT_NAME xbyak_aarch64
 	VERSION ${VERSION}
 	SOVERSION ${VERSION_SUB})
@@ -64,11 +60,9 @@
 
 if(MSVC)
 	if(MCL_MSVC_RUNTIME_DLL)
-		set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS} /MD /Oy /Ox /EHsc /GS- /Zi /DNDEBUG")
-		set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS} /MDd")
+		set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS} /Oy /Ox /EHsc /GS- /Zi /DNDEBUG")
 	else()
-		set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS} /MT /Oy /Ox /EHsc /GS- /Zi /DNDEBUG")
-		set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS} /MTd")
+		set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS} /Oy /Ox /EHsc /GS- /Zi /DNDEBUG")
 	endif()
 
 	target_compile_definitions(xbyak_aarch64 PUBLIC NOMINMAX)
@@ -80,33 +74,25 @@
 	target_compile_options(xbyak_aarch64_sh PRIVATE ${MCL_COMPILE_OPTIONS})
 endif()
 else()
-	# Set compiler flags for warnings
-	set(MCL_COMPILE_OPTIONS -Wall -Wextra -Wformat=2 -Wcast-qual -Wcast-align
-		-Wwrite-strings -Wfloat-equal -Wpointer-arith -DNDEBUG -O3 -fPIC)
-
+# Set compiler flags for warnings
+set(MCL_COMPILE_OPTIONS -Wall -Wextra -Wformat=2 -Wcast-qual -Wcast-align
+	-Wwrite-strings -Wfloat-equal -Wpointer-arith)
+if(NOT SHARED)
 	target_compile_options(xbyak_aarch64 PRIVATE ${MCL_COMPILE_OPTIONS})
-	set_target_properties(xbyak_aarch64 PROPERTIES
-		CXX_STANDARD 11
-		CXX_STANDARD_REQUIRED YES
-		CXX_EXTENSIONS NO)
 	target_compile_features(xbyak_aarch64 PUBLIC cxx_std_11)
-
-if(SHARED)
+else()
 	target_compile_options(xbyak_aarch64_sh PRIVATE ${MCL_COMPILE_OPTIONS})
-	set_target_properties(xbyak_aarch64_sh PROPERTIES
-		CXX_STANDARD 11
-		CXX_STANDARD_REQUIRED YES
-		CXX_EXTENSIONS NO)
 	target_compile_features(xbyak_aarch64_sh PUBLIC cxx_std_11)
 endif()
 endif()
 
+if(NOT SHARED)
 install(TARGETS xbyak_aarch64
 	EXPORT xbyak_aarch64Targets
 	LIBRARY DESTINATION lib
 	ARCHIVE DESTINATION lib
 )
-if(SHARED)
+else()
 install(TARGETS xbyak_aarch64_sh
 	EXPORT xbyak_aarch64Targets
 	LIBRARY DESTINATION lib
